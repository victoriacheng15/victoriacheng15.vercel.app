---
import { PROJECTS } from "@/data/constants";
import Link from "./Link.astro";
import TechStack from "./TechStack.astro";

function formatImageName(name: string) {
	return name.toLowerCase().split(" ").join("-");
}
---

<section class="flex flex-col gap-6">
	{
		PROJECTS.map(({ title, code, live, description, backend, techs, isDevelop }) => (
			<article class="border-accent flex flex-col overflow-hidden rounded-lg border-2">
				<h2 class="w-full bg-gray-700 py-2 text-center text-xl tracking-wider text-slate-100">
					{title}
					{isDevelop && "- work in process"}
				</h2>
				<div class="flex flex-col gap-2 md:flex-row md:gap-4 lg:gap-6">
					<div class="relative mx-auto flex flex-1 basis-1/2 justify-center">
						<div class="h-full max-w-full">
							<img
								class="h-full object-cover"
								src={`/projects/${formatImageName(title)}.jpg`}
								alt={title}
								loading="lazy"
							/>
						</div>
						<div class="absolute left-0 bottom-4 flex w-full justify-between px-4">
							<Link href={code} text="Code" />
							{backend && <Link href={backend} text="API Site" />}
							<Link href={live} text="Live Site" />
						</div>
					</div>
					<div class="my-auto flex-1 space-y-6 p-4 text-lg md:basis-[50%] lg:basis-[80%]">
						<h3 class="text-lg font-bold">Description:</h3>
						<p>{description}</p>
						<h3 class="text-lg font-bold">Tech Stacks:</h3>
						<TechStack techs={techs} />
					</div>
				</div>
			</article>
		))
	}
</section>
