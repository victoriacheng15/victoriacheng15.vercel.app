---
import TechStack from "./TechStack.astro";
import { getPinnedProjects } from "@/utils";
import { projectDetails } from "@/data/projects";
import { Icon } from "astro-icon";

const projects = await getPinnedProjects();
---

<section class="flex flex-col gap-6">
	{
		projects.map(({ name, description, url, stargazerCount }) => (
			<a href={`${url}#readme`} target="_blank" rel="noopener noreferrer">
				<article class="border-accent hover:border-link space-y-4 overflow-hidden rounded-md border-4 p-4 duration-300 ease-in-out">
					<div class="flex justify-between">
						<h2 class="flex items-center gap-2 text-xl md:text-2xl">{name}</h2>
						<span class="flex items-center gap-1">
							{stargazerCount}
							<Icon name="ic:baseline-star" />
						</span>
					</div>
					<p class="italic">"{description}"</p>
					{projectDetails
						.filter(({ title }) => title === name)
						.flatMap(({ techs }) => (
							<TechStack techs={techs} />
						))}
				</article>
			</a>
		))
	}
</section>

<style>
	[astro-icon] {
		width: 20px;
	}
</style>
